---
name: verification-loop
description: |
  ã“ã®ã‚¹ã‚­ãƒ«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œæ¤œè¨¼ã€ã€Œverifyã€ã€Œå“è³ªãƒã‚§ãƒƒã‚¯ã€ã€Œlintã€ã€Œtypecheckã€ã€Œãƒ†ã‚¹ãƒˆã€ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ã€ã«ã¤ã„ã¦è³ªå•ã—ãŸã¨ãã€ã¾ãŸã¯6æ®µéšæ¤œè¨¼ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã«ä½¿ç”¨ã™ã‚‹ã€‚
---

# Verification Loop

## 6 æ®µéšæ¤œè¨¼ãƒ•ãƒ­ãƒ¼

### Step 1: Build Check ğŸ—ï¸

ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

```bash
pnpm build
# ã¾ãŸã¯
npm run build
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**

- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã—
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒé©åˆ‡
- è­¦å‘Šã®ç¢ºèª

### Step 2: Type Check ğŸ“

TypeScript ã®å‹ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèªã€‚

```bash
pnpm typecheck
# ã¾ãŸã¯
npx tsc --noEmit
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**

- å‹ã‚¨ãƒ©ãƒ¼ãªã—
- strict mode æº–æ‹ 
- any ä½¿ç”¨ãªã—

### Step 3: Lint Check ğŸ”

ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«æº–æ‹ ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

```bash
pnpm lint
# è‡ªå‹•ä¿®æ­£
pnpm lint --fix
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**

- ESLint ã‚¨ãƒ©ãƒ¼ãªã—
- è­¦å‘Šã®ç¢ºèªã¨å¯¾å¿œ
- Prettier ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### Step 4: Test Check âœ…

ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

```bash
pnpm test
# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
pnpm test --coverage
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**

- å…¨ãƒ†ã‚¹ãƒˆã‚°ãƒªãƒ¼ãƒ³
- ã‚«ãƒãƒ¬ãƒƒã‚¸ 80%ä»¥ä¸Š
- æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚ã‚Š

### Step 5: Security Check ğŸ”’

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ãŒãªã„ã“ã¨ã‚’ç¢ºèªã€‚

```bash
npm audit --audit-level=moderate
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**

- ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ãªã—
- æ©Ÿå¯†æƒ…å ±ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ãªã—
- OWASP Top 10 æº–æ‹ 

### Step 6: Diff Check ğŸ“Š

å¤‰æ›´ãŒé©åˆ‡ã«ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

```bash
git diff --stat HEAD~1
git diff HEAD~1 --name-only
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**

- æœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ãªã—
- é©åˆ‡ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®é™¤å¤–

## æ¤œè¨¼çµæœãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```
ã€6 æ®µéšæ¤œè¨¼çµæœã€‘

âœ… Step 1: Build    - ãƒ‘ã‚¹
âœ… Step 2: Type     - ãƒ‘ã‚¹
âš ï¸  Step 3: Lint    - è­¦å‘Š 3 ä»¶
âœ… Step 4: Test     - ãƒ‘ã‚¹ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸: 85%ï¼‰
âœ… Step 5: Security - ãƒ‘ã‚¹
âœ… Step 6: Diff     - å¤‰æ›´ 5 ãƒ•ã‚¡ã‚¤ãƒ«

ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¿…è¦ã€‘
- lint è­¦å‘Šã‚’ä¿®æ­£: `pnpm lint --fix`
```

## CI/CD çµ±åˆ

```yaml
# GitHub Actions ä¾‹
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: pnpm install
      - run: pnpm build
      - run: pnpm typecheck
      - run: pnpm lint
      - run: pnpm test --coverage
      - run: npm audit --audit-level=moderate
```
