---
name: eval-harness
description: |
  ã“ã®ã‚¹ã‚­ãƒ«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒEvalã€ã€Œè©•ä¾¡ã€ã€Œpass@kã€ã€Œèƒ½åŠ›ãƒ†ã‚¹ãƒˆã€ã€Œå›å¸°ãƒ†ã‚¹ãƒˆã€ã€Œå“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ã«ã¤ã„ã¦è³ªå•ã—ãŸã¨ãã€ã¾ãŸã¯Evalé§†å‹•é–‹ç™ºã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã«ä½¿ç”¨ã™ã‚‹ã€‚
---

# Eval Harness

## Eval é§†å‹•é–‹ç™ºã¨ã¯

ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’å®šé‡çš„ã«æ¸¬å®šã—ã€ç¶™ç¶šçš„ãªæ”¹å–„ã‚’è¿½è·¡ã™ã‚‹é–‹ç™ºæ‰‹æ³•ã§ã™ã€‚

## åŸºæœ¬æ¦‚å¿µ

### èƒ½åŠ›ãƒ†ã‚¹ãƒˆï¼ˆCapability Testsï¼‰

æ–°æ©Ÿèƒ½ãŒæœŸå¾…é€šã‚Šå‹•ä½œã™ã‚‹ã‹ã‚’æ¤œè¨¼ï¼š

- æ–°ã—ã„ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‹•ä½œ
- æ–°ã—ã„ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ©Ÿèƒ½
- æ–°ã—ã„ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

### å›å¸°ãƒ†ã‚¹ãƒˆï¼ˆRegression Testsï¼‰

æ—¢å­˜æ©Ÿèƒ½ãŒå£Šã‚Œã¦ã„ãªã„ã‹ã‚’æ¤œè¨¼ï¼š

- ãƒã‚°ä¿®æ­£å¾Œã®å†ç™ºé˜²æ­¢
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã®å‹•ä½œç¢ºèª
- ä¾å­˜é–¢ä¿‚æ›´æ–°å¾Œã®äº’æ›æ€§

### pass@k ãƒ¡ãƒˆãƒªã‚¯ã‚¹

k å›ã®è©¦è¡Œã§æˆåŠŸã™ã‚‹ç¢ºç‡ï¼š

- **pass@1**: 1 å›ç›®ã§æˆåŠŸã™ã‚‹ç¢ºç‡
- **pass@3**: 3 å›ä»¥å†…ã§æˆåŠŸã™ã‚‹ç¢ºç‡
- **pass@5**: 5 å›ä»¥å†…ã§æˆåŠŸã™ã‚‹ç¢ºç‡

## Eval å®šç¾©

### YAML ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```yaml
name: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½
description: ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼
type: capability

tests:
  - name: æ­£å¸¸ãƒ­ã‚°ã‚¤ãƒ³
    input:
      email: "test@example.com"
      password: "validPassword123"
    expected:
      success: true
      user:
        email: "test@example.com"

  - name: ç„¡åŠ¹ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
    input:
      email: "test@example.com"
      password: "invalid"
    expected:
      success: false
      error: "INVALID_CREDENTIALS"

pass_criteria:
  pass_at_1: 0.9
  pass_at_3: 0.95
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
evals/
â”œâ”€â”€ capability/           # èƒ½åŠ›ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ auth-login.yaml
â”‚   â”œâ”€â”€ user-crud.yaml
â”‚   â””â”€â”€ api-response.yaml
â”œâ”€â”€ regression/           # å›å¸°ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ issue-123-fix.yaml
â”‚   â””â”€â”€ issue-456-fix.yaml
â””â”€â”€ reports/              # å®Ÿè¡Œãƒ¬ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ 2024-01-20.json
    â””â”€â”€ latest.json
```

## å®Ÿè¡Œãƒ¬ãƒãƒ¼ãƒˆ

```json
{
  "timestamp": "2024-01-20T15:30:00Z",
  "eval": "auth-login",
  "results": {
    "total": 3,
    "passed": 3,
    "failed": 0
  },
  "metrics": {
    "pass_at_1": 1.0,
    "pass_at_3": 1.0
  },
  "tests": [
    {
      "name": "æ­£å¸¸ãƒ­ã‚°ã‚¤ãƒ³",
      "status": "passed",
      "attempts": 1
    }
  ]
}
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. æ–°æ©Ÿèƒ½è¿½åŠ æ™‚

- èƒ½åŠ›ãƒ†ã‚¹ãƒˆã® Eval ã‚’ä½œæˆ
- pass@1 = 0.9 ä»¥ä¸Šã‚’ç›®æ¨™

### 2. ãƒã‚°ä¿®æ­£æ™‚

- å›å¸°ãƒ†ã‚¹ãƒˆã® Eval ã‚’ä½œæˆ
- ä¿®æ­£å‰ã¯å¤±æ•—ã€ä¿®æ­£å¾Œã¯æˆåŠŸ

### 3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ™‚

- æ—¢å­˜ Eval ãŒã™ã¹ã¦ pass ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- æ–°ã—ã„å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ãªã„ã“ã¨ã‚’æ¤œè¨¼

### 4. CI/CD çµ±åˆ

```yaml
# GitHub Actions
jobs:
  eval:
    runs-on: ubuntu-latest
    steps:
      - run: pnpm eval --run-all
      - run: pnpm eval --report
```

## ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¿½è·¡

```
ğŸ“Š Eval ãƒˆãƒ¬ãƒ³ãƒ‰

| æ—¥ä»˜       | pass@1 | pass@3 | ãƒ†ã‚¹ãƒˆæ•° |
|------------|--------|--------|----------|
| 2024-01-18 | 0.85   | 0.92   | 30       |
| 2024-01-19 | 0.88   | 0.95   | 35       |
| 2024-01-20 | 0.92   | 0.98   | 40       |

ğŸ“ˆ æ”¹å–„å‚¾å‘: +7% (pass@1)
```
