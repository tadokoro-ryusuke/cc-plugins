# Performance Rules

## モデル選択ガイド

タスクの複雑さに応じてモデルを選択：

### Opus（複雑なタスク）

- アーキテクチャ設計
- 複雑なリファクタリング
- セキュリティ監査
- TDD サイクルの実行

### Sonnet（中程度のタスク）

- コードレビュー
- ビルドエラー修正
- ドキュメント生成
- E2E テスト実行

### Haiku（単純なタスク）

- 単純な検索
- フォーマット確認
- 簡単な質問への回答

## コンテキスト管理

### 最適化戦略

- 不要なファイルを読み込まない
- 大きなファイルは必要な部分のみ読み込む
- 完了したタスクのコンテキストは圧縮

### 警告

- 全 MCP を同時に有効化しない
- 200k トークンが 70k に縮小する可能性

## コード パフォーマンス

### フロントエンド

- React.memo で不要な再レンダリングを防止
- useMemo/useCallback を適切に使用
- バンドルサイズを監視

### バックエンド

- N+1 クエリを避ける
- インデックスを適切に設定
- キャッシュ戦略を実装
